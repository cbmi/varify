define(["marionette","../core","../query","../stats"],function(e,i,t,s){var r=e.Layout.extend({className:"workspace-workflow",template:"workflows/workspace",ui:{loadingOverlay:".loading-overlay"},regions:{dataSummary:".data-summary-region",publicQueries:".public-query-region",queries:".query-region"},regionViews:{dataSummary:s.CountList,publicQueries:t.QueryList,queries:t.QueryList},initialize:function(){if(this.data={},i.isSupported("2.2.0")&&!(this.data.publicQueries=this.options.public_queries))throw new Error("public queries collection required");if(!(this.data.queries=this.options.queries))throw new Error("queries collection required");if(!(this.data.context=this.options.context))throw new Error("context model required");if(!(this.data.view=this.options.view))throw new Error("view model required");if(i.isSupported("2.3.6")&&!(this.data.stats=this.options.stats))throw new Error("stats model required");this.on("router:load",function(){i.panels.context.closePanel({full:!0}),i.panels.concept.closePanel({full:!0}),this.ui.loadingOverlay.hide()}),this.on("router:unload",function(){this.ui.loadingOverlay.hide()})},onRender:function(){var e=new this.regionViews.queries({collection:this.data.queries,context:this.data.context,view:this.data.view,editable:!0});if(this.queries.show(e),i.isSupported("2.2.0")){var t=new this.regionViews.publicQueries({collection:this.data.publicQueries,context:this.data.context,view:this.data.view,title:"Public Queries",emptyMessage:"There are no public queries. You can create a new, public query by navigating to the 'Results'page and clicking on the 'Save Query...' button. While filling out the query form, you can mark the query as public which will make it visible to all users and cause it to be listed here."});this.publicQueries.show(t),this.listenTo(this.data.queries,"sync",function(){this.data.publicQueries.fetch({reset:!0})}),this.listenTo(this.data.queries,"destroy",function(e){this.data.publicQueries.remove(e)})}if(i.isSupported("2.3.6")){var s=new this.regionViews.dataSummary({collection:this.data.stats.counts});this.dataSummary.show(s)}this.listenTo(i.data.concepts,"reset",function(){this.queries.show(e),this.publicQueries&&this.publicQueries.show(t)}),this.listenTo(this.data.view,"request",function(){this.ui.loadingOverlay.show()})}});return{WorkspaceWorkflow:r}});
//# sourceMappingURL=workspace.js.map