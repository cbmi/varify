var __hasProp={}.hasOwnProperty,__extends=function(t,e){function i(){this.constructor=t}for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},__slice=[].slice;define(["../../core","../base","./manager","./nodes"],function(t,e,i,n){var s,o,r,a,h,l;return r={branch:n.BranchNodeModel,condition:n.ConditionNodeModel,composite:n.CompositeNodeModel},a=function(t,e){var i,s;if(t instanceof n.ContextNodeModel)return t.type;for(s in r)if(i=r[s],!i.prototype.validate.call(t,t,e))return s;return"condition"},n.ContextNodeModel.create=function(t,e){var i,s;if(s=e.type||a(t,e),null==(i=r[s]))throw new n.ContextNodeError("Unknown context node type");return new i(t,e)},o=function(e){function n(){return h=n.__super__.constructor.apply(this,arguments)}return __extends(n,e),n.prototype.managerEventPrefix="tree",n.prototype.initialize=function(){var e=this;return this.manager=new i.ContextTreeManager(this),this.listenTo(this.manager,"all",function(){var t,i,n;return n=arguments[0],i=arguments[1],t=3<=arguments.length?__slice.call(arguments,2):[],e.trigger.apply(e,[""+e.managerEventPrefix+":"+i].concat(__slice.call(t)))}),this.on("sync",function(e,i,n){return null==n&&(n={}),n.silent!==!0?t.trigger(t.CONTEXT_SYNCED,this,"success"):void 0}),this.on("change:json",function(t,e,i){return this.manager.set(e,i)})},n.prototype.toJSON=function(t){var e;return null==t&&(t={}),e=n.__super__.toJSON.apply(this,arguments),e.json=this.manager.toJSON(),e},n.prototype.isSession=function(){return this.get("session")},n.prototype.isArchived=function(){return this.get("archived")},n}(e.Model),s=function(t){function e(){return l=e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e.prototype.model=o,e}(e.SessionCollection),{ContextModel:o,ContextCollection:s}});
//@ sourceMappingURL=model.js.map