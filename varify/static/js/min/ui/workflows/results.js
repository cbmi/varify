define(["underscore","cilantro","cilantro/ui/numbers","../tables","../../utils"],function(e,t,n,r,i){var s=t.ui.ResultCount.extend({initialize:function(){this.data={};if(!(this.data.context=this.options.context))throw new Error("context model required")},renderCount:function(e,t){var r=i.samplesInContext(this.data.context);n.renderCount(this.ui.count,t),r.length===1?(this.ui.label.text("records in "+r[0]),this.ui.label.attr("title",r[0]),this.ui.label.tooltip({animation:!1,html:!0,placement:"bottom",container:"body"})):(this.ui.label.text("records in various samples"),this.ui.label.attr("title","various samples"),this.ui.label.tooltip("destroy"))}}),o=t.ui.ResultsWorkflow.extend({template:"varify/workflows/results",events:function(){return e.extend({"click [data-toggle=phenotype-dialog]":"showPhenotypesModal"},t.ui.ResultsWorkflow.prototype.events)},initialize:function(){t.ui.ResultsWorkflow.prototype.initialize.call(this);if(!(this.data.context=this.options.context))throw new Error("context model required")},showPhenotypesModal:function(){t.dialogs.phenotype.open()},onRender:function(){$(document).on("scroll",this.onPageScroll),this.paginator.show(new t.ui.Paginator({model:this.data.results})),this.count.show(new s({model:this.data.results,context:this.data.context})),this.table.show(new r.ResultTable({view:this.data.view,collection:this.data.results})),this.ui.navbarButtons.tooltip({animation:!1,placement:"bottom"})}});return{ResultsWorkflow:o}})