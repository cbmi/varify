require({config:{tpl:{variable:"data"}},shim:{bootstrap:["jquery"],marionette:{deps:["backbone"],exports:"Marionette"},highcharts:{deps:["jquery"],exports:"Highcharts"}}},["jquery","underscore","cilantro","project/ui","project/csrf"],function(e,t,n,r){var i=2,s=111;n.config.set("varify.sample.concept",i),n.config.set("varify.sample.field",s);var o={url:n.config.get("url"),credentials:n.config.get("credentials")},u=function(){var e={view:{columns:[i]}},t;return n.session&&(t=n.session.data.views.session.get("json"))!=null&&(e.view.ordering=t.ordering),e};n.config.set("fields.defaults.form.stats",!1),n.config.set("fields.types.number.form.chart",!1),n.config.set("fields.types.date.form.chart",!1),n.config.set("fields.types.time.form.chart",!1),n.config.set("fields.types.datetime.form.chart",!1),n.config.set("fields.instances.27.form.controls",["multiSelectionList"]),n.config.set("fields.instances.28.form.controls",["multiSelectionList"]),n.config.set("fields.instances.29.form.controls",["multiSelectionList"]),n.config.set("fields.instances.61.form.controls",["multiSelectionList"]),n.config.set("fields.instances.64.form.controls",["multiSelectionList"]),n.config.set("fields.instances.75.form.controls",["search"]),n.config.set("fields.instances.68.form.controls",["singleSelectionList"]),n.controls.set("Sift",r.SiftSelector),n.controls.set("PolyPhen",r.PolyPhenSelector),n.config.set("fields.instances.58.form.controls",["Sift"]),n.config.set("fields.instances.56.form.controls",["PolyPhen"]),n.config.set("fields.instances.110.form.controls",[{options:{isNullLabel:"Not In HGMD",isNotNullLabel:"In HGMD"},control:"nullSelector"}]);var a=function(e){t.findWhere(e,{concept:i})&&n.dialogs.sample.open()};n.config.set("filters.required",[{concept:i}]),n.on(n.CONTEXT_INVALID,a),n.on(n.CONTEXT_REQUIRED,a),n.ready(function(){n.sessions.open(o).then(function(){n.config.set("session.defaults.data.preview",u),this.data.contexts.once("sync",function(){this.session.validate()}),n.panels={concept:new n.ui.ConceptPanel({collection:this.data.concepts.queryable}),context:new n.ui.ContextPanel({model:this.data.contexts.session})},n.dialogs={exporter:new r.ExporterDialog({exporters:this.data.exporter}),columns:new n.ui.ConceptColumnsDialog({view:this.data.views.session,concepts:this.data.concepts.viewable}),query:new n.ui.EditQueryDialog({view:this.data.views.session,context:this.data.contexts.session,collection:this.data.queries}),resultDetails:new r.ResultDetails,phenotype:new r.Phenotype({context:this.data.contexts.session}),sample:new r.SampleDialog({context:this.data.contexts.session})};var t=[];e.each(n.panels,function(e,n){n.render(),t.push(n.el)}),e.each(n.dialogs,function(e,n){n.render(),t.push(n.el)});var i=e(n.config.get("main"));i.append.apply(i,t),n.workflows={query:new n.ui.QueryWorkflow({context:this.data.contexts.session,concepts:this.data.concepts.queryable}),results:new r.ResultsWorkflow({view:this.data.views.session,context:this.data.contexts.session,results:this.data.preview}),sampleload:new r.SampleLoader({context:this.data.contexts.session})};var s=[{id:"query",route:"query/",view:n.workflows.query},{id:"results",route:"results/",view:n.workflows.results},{id:"sample-load",route:"sample/:sample_id/",view:n.workflows.sampleload}];n.workflows.workspace=new n.ui.WorkspaceWorkflow({queries:this.data.queries,context:this.data.contexts.session,view:this.data.views.session,public_queries:this.data.public_queries}),s.push({id:"workspace",route:"workspace/",view:n.workflows.workspace}),n.workflows.queryload=new n.ui.QueryLoader({queries:this.data.queries,context:this.data.contexts.session,view:this.data.views.session}),s.push({id:"query-load",route:"results/:query_id/",view:n.workflows.queryload}),this.start(s)})})})